# Сбор информации в форме временных рядов

## Добавление сбора информации в виде временных рядов
1. Переместить патч `buildstats_timestamps.patch` в папку `poky/meta/classes-global/`.
2. Применить патч `buildstats_timestamps.patch` к `poky/meta/classes-global/buildstats.bbclass`:
    ```shell
    patch -p1 buildstats.bbclass < buildstats.patch
    ```
3. Запустить сборку.

## Структура собранной информации
Полученные временные ряды будут находиться в папке `build/tmp/buildstats/{package_name}`. Названия файлов с временными
рядами имеют шаблон `{task_name}_timestamps`.

Пример содержимого файла `{task_name}_timestamps`:
```text
...
Timestamp: 2024-06-25 17:45:13
RAM: VmPeak: 147628 kB, VmSize: 147628 kB, VmHWM: 59252 kB, VmRSS: 59252 kB
IO Stats: rchar: 576639, wchar: 47799, syscr: 53, syscw: 46, read_bytes: 0, write_bytes: 36864, cancelled_write_bytes: 0
...
```
Где 
- `RAM` - информация о потреблении памяти:
  - `VmPeak` - максимальное использование памяти
  - `VmSize` - размер виртуальной памяти. Виртуальная память отображает общий объем адресного пространства, выделенного процессу для его работы. Это включает все доступные адреса, которые процесс может потенциально использовать
  - `VmHWM` - максимальное использование физической памяти
  - `VmRSS` - текущий объем реальной (физически используемой) оперативной памяти, занимаемой процессом
Другие возможные параметры:
  - `VmData` - размер данных, отражает объем физической памяти, используемой процессом для хранения данных
  - `VmStk` - размер стека, показывает объем памяти, выделенной под стек вызовов для процесса
  - `VmExe` - размер исполняемого кода, отражает объем памяти, занятой исполняемым кодом программы
  - `VmLib` - размер библиотек, показывает объем памяти, занятый библиотеками, загруженными процессом
  - `VmLck` - объем заблокированной в памяти страницы. Заблокированная память означает, что страница данных никогда не будет выгружена (swapped) из оперативной памяти на диск. Это гарантирует, что данные всегда будут доступны в оперативной памяти и не будут подвергаться операциям свопинга. Однако сама страница может перемещаться в пределах физической памяти системы. Это может происходить, например, при оптимизации использования физической памяти ядром операционной системы.
  - `VmPin` - объем закрепленной памяти. Закрепленная память представляет собой специализированный случай заблокированной памяти. В отличие от обычной заблокированной памяти, закрепленная память фактически привязывается к конкретному местоположению (странице) в физической памяти операционной системы. Это означает, что страница закрепленной памяти не только не будет выгружена на диск, но и не будет перемещаться в пределах оперативной памяти.
  - `VmPTE` - размер таблицы страниц. Таблицы страниц служат для отображения виртуальных адресов процесса на физические адреса в оперативной памяти. Каждая запись в таблице страниц (PTE) содержит информацию о соответствии между виртуальным и физическим адресами.
  - `RssAnon` - объем оперативной памяти, который процесс использует для анонимных страниц. Анонимные страницы — это страницы виртуальной памяти, которые не связаны с каким-либо файлом в файловой системе.
  - `RssFile` - объем физической памяти, который процесс использует для страниц, связанных с файлами в файловой системе. Эти страницы могут включать в себя исполняемый код, библиотеки, открытые файлы или любые другие данные, читаемые из файлов.
  - `RssShmem` - объем физической памяти, который процесс использует для хранения данных в разделяемых областях памяти.

- `IO Stats` - информация о вводе/выводе:
  - `rchar` - количество символов, прочитанных из файловой системы
  - `wchar` - количество символов, записанных в файловую систему
  - `syscr` - количество операций чтения
  - `syscw` - количество операций записи
  - `read_bytes` - количество байт, прочитанных из файловой системы
  - `write_bytes` - количество байт, записанных в файловую систему
  - `cancelled_write_bytes` - количество байт, отмененных записей
