# Эксперимент: учитывается ли кэш систем сборок на удаленных серверах

## Результаты Экспериментов с Go и CMake

После настройки кэш-сервера и проведения экспериментов с системами сборок Go и CMake были выявлены следующие результаты:

1. Эксперименты с Go
    * Было проведено добавление зависимости в рецепт. В результате к сборке добавились задачи, связанные с новой
      зависимостью.
    * Также был добавлен патч. В этом случае задача do_patch и следующие за ней задачи были выполнены заново.
    * После добавления зависимости в скрипты go, начали выполняться задачи, связанные с изменением исходного кода.
    * Удаление sstate-cache не оказало заметного влияния на процесс сборки.
    * Файлы с логами задачи do_compile для каждого случая находятся в папке [logs](./logs). Проведя их анализ, можно
      увидеть, что нет обращений к sstate-cache.

2. Эксперименты с CMake
    * Для CMake был обнаружен способ использования кэша напрямую как обычного файла.
    ```
    SUMMARY = "Simple Hello World CMake application"
    SECTION = "examples"
    LICENSE = "MIT"
    LIC_FILES_CHKSUM = "file://${COMMON_LICENSE_DIR}/MIT;md5=0835ade698e0bcf8506ecda2f7b4f302"

    FILES:${PN} = "/mydir/bin/hellocmake"

    SRC_URI = "\
                file://CMakeLists.txt \
                file://hellocmake.cpp \
                http://localhost:8000/CMakeCache.txt;sha256sum=8855c6119660c614d285554e51769066e94fcb75ff215ccc2fa6b4838b18756b \
            "

    S = "${WORKDIR}/sources-unpack"

    inherit cmake

    do_configure() {
        mkdir -p ${B}
        cmake --install-prefix /mydir -C ${S}/CMakeCache.txt -S ${S} -B ${B}
    }
   ```

    * Для данного случая результаты экспериментов аналогичны тем, что были обнаружены для Go.
