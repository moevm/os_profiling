# Сводный документ, опсиывающий кэширование к Bibake и Yocto, а также то, как с ним работать
### Часто используемые термины  
**Кэш** -  сохранение промежуточных результатов, созданных во время сборки, таких как скомпилированные объектные файлы, пакеты или даже целые образы. Это позволяет ускорить последующие сборки, так как вместо повторного выполнения всех шагов сборки можно использовать сохраненные результаты.    
  
**Хэширование** - использование хэш-функций для идентификации и проверки целостности сохраненных в кэше данных. Хэш-функция вычисляет уникальное хэш-значение для каждого объекта кэша, и это значение сохраняется вместе с артефактом в кэше. При повторном использовании артефакта из кэша хэш-функция снова вычисляет хэш-значение и сравнивает его с сохраненным значением, чтобы убедиться, что артефакт не был изменен или поврежден.     
  
**Кэш-сервер**  - это сервер, который используется для хранения и предоставления кэшированных данных.  
  
**BitBake** **хэш-сервер** - это сервер, который используется для хранения и предоставления хэш-значений для данных, созданных во время сборки BitBake. BitBake хэш-сервер используется для проверки целостности артефактов, предотвращения повторной сборки неизмененных артефактов и обеспечения надежности и безопасности сборок.  

### Локация кэша (что сохраняется, где он по умолчанию лоциуерется и как настроить локацию)
По умолчанию весь кэш находися в папке poky/build:
1) кэш состояния - poky/build/sstate-cache/
2) кэш загрузок - poky/build/downloads/

Это значения по умолчанию, но его можно настроить, прописав в poky/build/conf/local.conf две переменные:  
1) SSTATE_DIR = "abs_path" - задание локации кэша состояния (можно использовать переменную `${TOPDIR}`)
2) DL_DIR = "abs_path" - задание локации кэша загрузок (можно использовать переменную `${TOPDIR}`)

Подробнее по этой теме можно почитать [тут](./cache_locate.md)

### Распространение локального кэша на локальную сборку
Чтобы поделиться кэшем от старой сборки новой сборке можно задать путь к уже имеющимся папкам кэша и загрузок, также можно указать в файле poky/build/conf/local.conf значение `BB_NO_NETWORK = "1"` - эта инструкция жестко говорит сборке, что ничего скачивать не нужно - использовать только локлаьные данные 

Подробнее по этой теме можно почитать [тут](./local_cache_share.md)

### Настройка кэш сервера и хэш сервера локально + конфигурация новой сборки для использование этих серверов через зеркалирование
В предложенных решениях используется простой http python сервер, в котором располагнается кэш сборок и загрузок  
О том, как настроить простой http сервер без хэш сервера можно почитать [тут](./not_in_main.md)  

Однако использование кэш сервера без хэш сервера принесет прирост производительности меньший, чем использование его вместе с bitbake хэш сервером.  
О том, как настроить OEEquivHash кэш сервер можно почитать [тут](./not_in_main.md)  


### Общая - теоретическая информация о кэшировании
Общая информация о кэшировании (более абстрактная) представлена [тут](./yocto_cache.md)
