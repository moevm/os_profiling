## Локация локального кэша
Весь локалmный кэш хранится в `poky/build`
### Кэш процесса сборки
Кэш процесса сборки располагается в папке `poky/build/sstate-cache/`
### Кэш утилит сборки 
Кэш утилит сборки (утилит которые используются при сборке) располагается в папке `poky/build/cache/`  
### Загруженный исходный код
Загруженный исходный код и бинарные файлы располагаются `poky/build/downloads/`  

## Конфигурация параметров
Это стандартное расположение - его можно настраивать с помощью файла `poky/build/conf/local.conf`   
Сам файл формируется автоматическим образом.  
### Рассмотрим - где именно.

`oe-init-build-env` вызывает `oe-setup-builddir` , именно в этой файле заполняется `local.conf` .

### Настройка файла local.conf
Мы можем задать сами расположение локального [кэша](https://github.com/moevm/os_profiling/new/cache_locate/wiki#%D0%BB%D0%BE%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D1%8D%D1%88%D0%B0)  

Сопоставим переменной вид кэша   
`DL_DIR` - **Загруженный исходный код**   
`SSTATE_DIR` - **Кэш процесса сборки**   

В этом же файле можно настроить и зеркало удаленного кэш сервера с помощью переменной `SSTATE_MIRRORS`

## Инструкция проведения эксперимента с файлом local.conf
### Создание папки build и конфигурации
В чистом poky репозиторий (а если он не чистый, то можно выполнить rm -rf build - чтобы почистить) выполнить команду `source oe-init-build-env` - вы переместитесь в новую папку build, в которой создана папкп conf, в которой лежат файлы конфигураций. 
### Настройка параметров
Зайдите в файл local.conf - и допишите строки, например, такого содержания : `DL_DIR = "${TOPDIR}/experiment_downloads_experiment"` и `SSTATE_DIR = "${TOPDIR}/experiment_sstate-cache_experiment"`
### Запуск сборки: 
Для этого запуска необходимо из директории `poky/build` вызвать команду `bitbake <image>`, где image - собираемая цель (например core-image-minimal). Рассмотрим то, какие папки создались:   
![Screenshot from 2024-04-11 15-04-16](https://github.com/moevm/os_profiling/assets/90711883/c34b58c2-57f2-444e-bd20-ba849e80e2f6)    
Создались именно те папки, которые мы указали в настройке параметров.    
### Эсктренное завершение и перезапуск сборки 
проведем эксперимент - завершим работу (экстренно) и перезапустим сборку:   
![Screenshot from 2024-04-11 15-09-31](https://github.com/moevm/os_profiling/assets/90711883/f0ec8f04-ae88-4614-9c25-ed180179ed30)   
Видно, что кэш подгружается (то есть ни в каком другом месте проекта нет задания кэш папок) - это хорошо
