# Добавление предела нагрузки на сеть во время сборки

Для ускорения сборки пакетов в Yocto Project, можно добавить предел нагрузки на сеть во время сборки. Для этого нужно
сначала применить
патч [add_net_buildstats.patch](https://github.com/moevm/os_profiling/blob/1aa71b1f78111d2f731c0d86d5c1c60c3e091860/src/yocto-patches/add_net_buildstats.patch),
затем патч `add_net_limit.patch`.

Если в определенный момент сборки нагрузка на сеть превышает заданный предел, то из очереди `buildable` задач в первую
очередь будут взяты задачи `do_compile`, либо если таких задач в очереди нет, то задача с наилучшим приоритетом, которая
не является `do_fetch`.

Изменения, представленные в патче `add_net_limit.patch`, позволили ускорить сборку на 20 мин: с 220m24,670s до
163m11,441s.