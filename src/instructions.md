# **Instructions**

> Для выполнения следующих шагов необходим `Docker`!

Необходимо клонировать ветку `PB-33`, либо перейти в неё, если репозиторий уже клонирован. Это можно выполнить следующими командами:
```
git clone https://github.com/moevm/os_profiling.git -b PB-33
```
```
git checkout PB-33
git pull 
```
Все дальнейшие шаги происходят в директории `<image_name>-build`.
Тут и далее `image_name` может принимать только одно из следующих значений: `yocto`, `buildroot`.

- ### **Yocto** / **Buildroot**
    1. Чтобы создать образ требуется выполнить команду:
        ```
        docker-compose build --build-arg UID=$(id -u) --build-arg GID=$(id -g)
        ```
    
    2.  После удачной сборки образа, можно запустить контейнер командой:
        ```
        docker-compose up
        ```
        Когда произоёдет автоматическое закрытие контейнра -- всё будет установлено. 
    
    3.  
       
- ### **Запуск**
    1. **Yocto**
        Запуск образа происходит с помощью скрипта `up_yocto.sh`:
        ```
        ./up_yocto.sh
        ```
        Для авторизации в системе необходимо указать `login`, его значение `root`.
        Выход из системы осуществляется 2 способами:
        - `Ctrl + A`, + `X`
        - `Ctrl + A`, + `C`, + type `quit`
        
- ### **Логирование**
    В данный момент логирование предусмотерно только для **Yocto**.
    В скрипте `building.sh` реализован декоратор для предоставления возможности настройки логирования. Скрипт находится по пути `./assembly/building.sh`.
    
    Для того, чтобы настроить и использовать нужные утилиты объявлены функции `function start_logging()` и `function finish_logging()`. Функции позволяют задавать необходимую реализацию логирования. Также в функции перёдаётся аргумент (`$1`) -- файл для логирования по умолчанию (`./assembly/logs/building_logs.txt`).
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    